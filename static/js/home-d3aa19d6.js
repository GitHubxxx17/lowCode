import{bR as re,bG as _,bH as fe,p as ye,aS as R,r as oe,X as ie,a as pe,aE as me,d as s,bN as ge,aV as Y,bS as he,e as Q}from"./index-f2bfc82c.js";import{s as z}from"./userStore-7be86369.js";const be="page",ve="Hello world",we={},xe=[{type:"container-ordinary",style:{position:"relative",width:"100%",zIndex:1},children:[{type:"button",style:{display:"",position:"relative",zIndex:1},buttonstyle:"primary",size:"default",icon:{},twiceComfire:{},bubblePrompt:{triggerMode:"鼠标悬浮",promptLocation:"下"},isDisable:!1,children:"我的按钮"},{type:"text",style:{position:"relative",fontSize:"20px",color:"blue",zIndex:1},children:"(｡･∀･)ﾉﾞ"},{type:"input",value:"",inputStyle:"text",size:"default",defaultValue:"123",placeholder:"",showPassword:!1,clearable:!1,maxlength:"",minlength:"",showWordLimit:!0,style:{position:"relative",zIndex:1},children:""}]}],tt={type:be,title:ve,style:we,body:xe},De=re("dragStore",{state:()=>({selectedMaterial:null,isClone:!1,isDrag:!1,isDraging:!1,selectKey:null,selectedComponent:null,containerData:null,selectedIndex:null}),actions:{destructionOfDrag:null}});var ae={exports:{}};(function(e,t){(function(n,o){e.exports=o()})(_,function(){var n=typeof Promise=="function",o=typeof self=="object"?self:_,i=typeof Symbol<"u",u=typeof Map<"u",b=typeof Set<"u",w=typeof WeakMap<"u",d=typeof WeakSet<"u",f=typeof DataView<"u",p=i&&typeof Symbol.iterator<"u",x=i&&typeof Symbol.toStringTag<"u",h=b&&typeof Set.prototype.entries=="function",V=u&&typeof Map.prototype.entries=="function",O=h&&Object.getPrototypeOf(new Set().entries()),P=V&&Object.getPrototypeOf(new Map().entries()),A=p&&typeof Array.prototype[Symbol.iterator]=="function",W=A&&Object.getPrototypeOf([][Symbol.iterator]()),C=p&&typeof String.prototype[Symbol.iterator]=="function",S=C&&Object.getPrototypeOf(""[Symbol.iterator]()),k=8,I=-1;function N(c){var B=typeof c;if(B!=="object")return B;if(c===null)return"null";if(c===o)return"global";if(Array.isArray(c)&&(x===!1||!(Symbol.toStringTag in c)))return"Array";if(typeof window=="object"&&window!==null){if(typeof window.location=="object"&&c===window.location)return"Location";if(typeof window.document=="object"&&c===window.document)return"Document";if(typeof window.navigator=="object"){if(typeof window.navigator.mimeTypes=="object"&&c===window.navigator.mimeTypes)return"MimeTypeArray";if(typeof window.navigator.plugins=="object"&&c===window.navigator.plugins)return"PluginArray"}if((typeof window.HTMLElement=="function"||typeof window.HTMLElement=="object")&&c instanceof window.HTMLElement){if(c.tagName==="BLOCKQUOTE")return"HTMLQuoteElement";if(c.tagName==="TD")return"HTMLTableDataCellElement";if(c.tagName==="TH")return"HTMLTableHeaderCellElement"}}var j=x&&c[Symbol.toStringTag];if(typeof j=="string")return j;var m=Object.getPrototypeOf(c);return m===RegExp.prototype?"RegExp":m===Date.prototype?"Date":n&&m===Promise.prototype?"Promise":b&&m===Set.prototype?"Set":u&&m===Map.prototype?"Map":d&&m===WeakSet.prototype?"WeakSet":w&&m===WeakMap.prototype?"WeakMap":f&&m===DataView.prototype?"DataView":u&&m===P?"Map Iterator":b&&m===O?"Set Iterator":A&&m===W?"Array Iterator":C&&m===S?"String Iterator":m===null?"Object":Object.prototype.toString.call(c).slice(k,I)}return N})})(ae);var Ee=ae.exports;const Se=fe(Ee),G=typeof Buffer<"u",Me=G&&typeof Buffer.from<"u",Le=G?function(t){return Buffer.isBuffer(t)}:function(){return!1},Te=Me?function(t){return Buffer.from(t)}:G?function(t){return new Buffer(t)}:function(t){return t};function T(e){return Le(e)?"Buffer":Se(e)}const Ce=new Set(["Arguments","Array","Map","Object","Set"]);function Ie(e,t,n=null){switch(n||T(e)){case"Arguments":case"Array":case"Object":return e[t];case"Map":return e.get(t);case"Set":return t}}function U(e){return Ce.has(e)}function J(e,t,n,o=null){switch(o||T(e)){case"Arguments":case"Array":case"Object":e[t]=n;break;case"Map":e.set(t,n);break;case"Set":e.add(n);break}return e}const Oe=typeof globalThis<"u"&&globalThis!==null&&globalThis.Object===Object&&globalThis,Pe=typeof global<"u"&&global!==null&&global.Object===Object&&global,Ae=typeof self<"u"&&self!==null&&self.Object===Object&&self,$=Oe||Pe||Ae||Function("return this")();function ke(e){return e.slice(0)}function Be(e){return new Boolean(e.valueOf())}function je(e){return new DataView(e.buffer)}function ze(e){return Te(e)}function Ve(e){return new Date(e.getTime())}function We(e){return new Number(e)}function Ne(e){return new RegExp(e.source,e.flags)}function He(e){return new String(e)}function E(e,t){return $[t].from?$[t].from(e):new $[t](e)}function g(e){return e}function q(){return[]}function Re(){return new Map}function $e(){return{}}function Ue(){return new Set}const Fe=new Map([["ArrayBuffer",ke],["Boolean",Be],["Buffer",ze],["DataView",je],["Date",Ve],["Number",We],["RegExp",Ne],["String",He],["Float32Array",E],["Float64Array",E],["Int16Array",E],["Int32Array",E],["Int8Array",E],["Uint16Array",E],["Uint32Array",E],["Uint8Array",E],["Uint8ClampedArray",E],["Array Iterator",g],["Map Iterator",g],["Promise",g],["Set Iterator",g],["String Iterator",g],["function",g],["global",g],["WeakMap",g],["WeakSet",g],["boolean",g],["null",g],["number",g],["string",g],["symbol",g],["undefined",g],["Arguments",q],["Array",q],["Map",Re],["Object",$e],["Set",Ue]]);function Ke(){}function F(e,t=null,n=Ke){arguments.length===2&&typeof t=="function"&&(n=t,t=null);const o=t||T(e),i=Fe.get(o);if(o==="Object"){const u=n(e,o);if(u!==void 0)return u}return i?i(e,o):e}function Z(e,t={}){typeof t=="function"&&(t={customizer:t});const{customizer:n}=t,o=T(e);if(!U(o))return K(e,null,null,null);const i=F(e,o,n),u=new WeakMap([[e,i]]),b=new WeakSet([e]);return K(e,i,u,b)}function K(e,t,n,o,i){const u=T(e),b=F(e,u);if(!U(u))return b;let w;switch(u){case"Arguments":case"Array":w=Object.keys(e);break;case"Object":w=Object.keys(e),w.push(...Object.getOwnPropertySymbols(e));break;case"Map":case"Set":w=e.keys();break}for(let d of w){const f=Ie(e,d,u);if(o.has(f))J(t,d,n.get(f),u);else{const p=T(f),x=F(f,p);U(p)&&(n.set(f,x),o.add(f)),J(t,d,K(f,x,n,o),u)}}return t}function Ge(e){return{all:e=e||new Map,on:function(t,n){var o=e.get(t);o?o.push(n):e.set(t,[n])},off:function(t,n){var o=e.get(t);o&&(n?o.splice(o.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var o=e.get(t);o&&o.slice().map(function(i){i(n)}),(o=e.get("*"))&&o.slice().map(function(i){i(t,n)})}}}const ee=Ge();let le=null;console.log(le);function Xe(){const e=De(ye);let t=null,n=null,o=null,i=null,u=0,b=0,w=null,d=-1,f=-1,p=[],x=!1,h=[];const V=(r,a)=>{O(a);const{clientY:l,clientX:y,target:D}=a,M=C(D),{top:L,left:v}=M.getBoundingClientRect();ee.emit("cloneStart"),u=y-v,b=l-L,e.isClone=!0,e.selectedMaterial=r,t=document.createElement("div"),t.classList.add("ghostClone"),document.body.appendChild((R(e.selectedMaterial.preview(),t),t)),t.style.top=`${L}px`,t.style.left=`${v}px`,o=null,n=null,document.body.addEventListener("mousemove",P)},O=r=>{if(!(!k(r.target)&&!e.isClone)){if(e.isClone&&(t&&t.remove(),n&&(n.classList.remove("chosen-container"),I(n).push(Z(e.selectedMaterial.defaultData))),o&&o.remove(),e.isClone=!1,e.selectedMaterial=null,ee.emit("cloneEnd")),e.isDrag){if(t&&t.remove(),i){if(i.style.removeProperty("visibility"),document.body.removeEventListener("mousemove",c),n==null||n.classList.remove("chosen-container"),e.isDraging&&ue(),x){console.log("11111111");let a=I(n),l=w;d!=a.length-1?(a.splice(d,1),a.splice(f,0,l)):(a.splice(f,0,Z(l)),a.pop()),x=!1}i.classList.remove("chosenEl"),i.onmousedown=null}e.isDraging=!1,e.isDrag=!1,i=null}document.body.removeEventListener("mousemove",P),document.body.removeEventListener("mousemove",c)}};document.body.onmouseup=O;const P=r=>{const{clientY:a,clientX:l}=r;t.style.top=`${a-b}px`,t.style.left=`${l-u}px`},A=r=>{e.isClone&&(n&&(n.classList.remove("chosen-container"),o&&n.removeChild(o)),n=S(r.target),n.classList.add("chosen-container"),o=document.createElement("div"),o.classList.add("renderEl"),n.appendChild((R(e.selectedMaterial.render(e.selectedMaterial.defaultData),o),o)))},W=r=>{if(e.isClone){n&&n.classList.remove("chosen-container");let a=S(r.target);n.removeChild(o),n==a&&(n=S(r.target.parentNode),n.classList.add("chosen-container"),o=document.createElement("div"),o.classList.add("renderEl"),n.appendChild((R(e.selectedMaterial.render(e.selectedMaterial.defaultData),o),o)))}},C=r=>r.tagName=="DIV"?r.children[0]:r.tagName=="SPAN"?r:C(r.parentNode),S=r=>r.className.includes("container")?r:S(r.parentNode),k=r=>r.parentNode==document.body?!1:r!=null&&r.classList.contains("Editorcontainer")?!0:k(r.parentNode),I=r=>r.attributes.childrenList,N=r=>{if(t=null,e.isDraging=!1,n!=null&&n.classList&&n.classList.remove("chosen-container"),r.target.classList.contains("Editorcontainer")){n=r.target,r.target.classList.add("chosen-container"),e.selectedComponent=null,e.selectKey=null;return}e.isDrag=!0,i=H(r.target),e.selectKey=i.attributes["data-id"].nodeValue,i.classList.add("chosenEl"),n=S(i.parentNode),e.containerData=I(n),p=[...n.children],d=p.indexOf(i),f=d,w=e.containerData[d],e.selectedComponent=oe(w),e.selectedIndex=d,n.classList.add("chosen-container"),console.dir(i),i.onmousedown=a=>{const{clientY:l,clientX:y}=a,{top:D,left:M}=i.getBoundingClientRect();console.log("正在交换组件中"),u=y-M,b=l-D,e.isDraging=!0,de(),document.body.addEventListener("mousemove",c)},e.destructionOfDrag=()=>{e.isDrag&&(e.selectKey=null,e.selectedComponent=null,t&&t.remove(),i&&(i.style.removeProperty("visibility"),document.body.removeEventListener("mousemove",c),n==null||n.classList.remove("chosen-container"),i.classList.remove("chosenEl"),i.onmousedown=null),e.isDraging=!1,e.isDrag=!1,i=null)}},c=r=>{if(!e.isDraging)return;const{clientY:a,clientX:l}=r;t.style.top=`${a-b}px`,t.style.left=`${l-u}px`,H(r.target),ce(m(a,l))},B=r=>{let a=-1;for(let l=0;l<h[r].length;l++)a=Math.max(a,p[h[r][l]].offsetHeight);return a},j=()=>{let r=n.offsetWidth,a=0,l=[];for(let y=0;y<p.length;y++)l.push(y),a+=p[y].offsetWidth,a>r&&(l.pop(),h.push(l),l=[],a=p[y].offsetWidth,l.push(y));return l.length!=0&&h.push(l),h},m=function(r,a){h=[],j();let{top:l,left:y}=n.getBoundingClientRect(),D=0,M=0;for(let v=0;v<h.length;v++){let X=B(v);if(r>l&&r<=l+X){D=v;break}l+=X}let L=0;for(let v=0;v<h[D].length;v++){if(L=p[h[D][v]].offsetWidth,a>y&&a<=y+L){M=v;break}y+=L}return console.log(h[D][M]),h[D][M]},ce=r=>{r===-1||f===r||(console.log("渲染中的节点移动"),p.forEach((a,l)=>{a.style.setProperty("transition","transform 300ms ease"),r>d&&l>d&&l<=r?a.style.setProperty("transform",`translate3d(-${i.offsetWidth}px,0,0)`):r<=d&&l<d&&l>=r?a.style.setProperty("transform",`translate3d(${i.offsetWidth}px,0,0)`):a.style.setProperty("transform","translate3d(0,0,0)")}),f=r)},ue=function(){i.style.removeProperty("visibility"),p.forEach(r=>{r.style.removeProperty("transform"),r.style.removeProperty("transition")}),d!==f&&(x=!0)},H=r=>r?r.className&&r.className.includes("container")||r.classList&&r.classList.contains("cannotPreview")?r:H(r.parentNode):null,de=()=>{const{top:r,left:a,width:l,height:y}=i.getBoundingClientRect();t=document.createElement("div"),t.classList.add("ghostDrag"),t.style.width=`${l}px`,t.style.height=`${y}px`,t.innerHTML=i.outerHTML,document.body.appendChild(t),t.style.top=`${r}px`,t.style.left=`${a}px`,i.style.setProperty("visibility","hidden")};return{mousedown:V,mouseenter:A,mouseleave:W,onclickToDrag:N,deterWhetherToMoveUp:r=>r()}}const nt=e=>{le=oe(e)},te=Xe(),rt=re("mainStore",{state:()=>({title:"新项目",isPreview:!1,EditorData:null,copyData:null}),actions:{}}),ot=(e,t)=>{const n=e.__vccOpts||e;for(const[o,i]of t)n[o]=i;return n};const ne=ie({props:{style:Object,children:Object,childrenList:Array,text:String,class:String},setup(e){let t=pe(null);return me(()=>{t.value.attributes.childrenList=e.childrenList}),()=>s("div",{class:e.class,style:e.style,ref:t,datatype:e.class,onMouseenter:n=>te.mouseenter(n),onMouseleave:n=>te.mouseleave(n)},[e.children.length!=0?e.children:s("span",{class:"nochild"},[e.text])])}}),_e=[{label:"容器",icon:"icon iconfont icon-checkbox",type:"container-ordinary",category:"container",render(e){return e={...e,text:"容器",class:"container-ordinary","data-id":this.type},s(ne,e,null)},defaultData:{type:"container-ordinary",style:{position:"relative",width:"100%",zIndex:1},children:[]}},{label:"自由容器",icon:"icon iconfont icon-zidingyibuju",type:"container-free",category:"container",render(e){return e={...e,text:"自由容器",class:"container-free","data-id":this.type},s(ne,e,null)},defaultData:{type:"container-free",style:{position:"relative",width:"100%",zIndex:1},children:[]}},{label:"文字",icon:"icon iconfont icon-font",type:"text",category:"common",render(e){return s("div",{class:"cannotPreview","data-id":this.type},[s("span",{style:e.style,datatype:"text"},[e.children?e.children:"渲染文字"])])},defaultData:{type:"text",style:{position:"relative",fontSize:"16px",color:"black",zIndex:1},children:"渲染文字"}},{label:"按钮",icon:"icon iconfont icon-anniu",type:"button",category:"common",render(e){return s("div",{class:"cannotPreview","data-id":this.type},[s(ge,{style:e.style,class:"baseButton",type:e.buttonstyle,size:e.size,disabled:e.isDisable},{default:()=>[s("i",{class:["icon iconfont leftIcon",e.icon.leftIcon],style:{"font-size":e.icon.leftIconSize}},null),e.children?e.children:"渲染按钮",s("i",{class:["icon iconfont rightIcon",e.icon.rightIcon],style:{"font-size":e.icon.rightIconSize}},null)]})])},defaultData:{type:"button",style:{position:"relative",width:"87px",height:"32px",zIndex:1},buttonstyle:"",size:"default",icon:{},twiceComfire:{},bubblePrompt:{},isDisable:!0,children:"渲染按钮"}},{label:"输入框",icon:"icon iconfont icon-input",type:"input",category:"common",render(e){return s("div",{class:"cannotPreview","data-id":this.type},[s(Y("el-Input"),{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,style:e.style,size:e.size,type:e.inputStyle,placeholder:e.placeholder,showPassword:e.showPassword,clearable:e.clearable,maxlength:e.maxlength,minlength:e.minlength,"show-word-limit":e.showWordLimit,disabled:e.disabled,readonly:e.readonly,autofocus:e.autofocus,hidden:e.hidden},null)])},defaultData:{type:"input",value:"",inputStyle:"text",size:"default",placeholder:"请输入",showPassword:!1,clearable:!1,maxlength:"",minlength:"",showWordLimit:!1,disabled:!1,readonly:!1,autofocus:!1,hidden:!1,style:{position:"relative",zIndex:1},children:""}},{label:"下拉框",icon:"icon iconfont icon-m-xialacaidan",type:"select",category:"common",render(e){return s("div",{class:"cannotPreview","data-id":this.type},[s(he,{style:e.style,filterable:e.filterable?e.filterable:!1,placeholder:e.placeholder?e.placeholder:"请选择",modelValue:e.defaultValue,"onUpdate:modelValue":t=>e.defaultValue=t},{default:()=>[e.selectData&&e.selectData.map(t=>s(Y("el-option"),{key:t.value,value:t.value},null))]})])},defaultData:{type:"select",style:{position:"relative",zIndex:1},children:"",defaultValue:""}},{label:"文本框",icon:"icon iconfont icon-wenben",type:"textBox",category:"form",render(e){return s("div",{class:"cannotPreview",style:e.style.box,"data-id":this.type},[s("div",{style:e.style.title},[e.title?e.title:"文本"]),s(Q,{style:e.style.input,placeholder:e.inputBoxPlaceholder?e.inputBoxPlaceholder:"",clearable:e.clearable?e.clearable:!1,type:e.inputType?e.inputType:"text"},null)])},defaultData:{type:"textBox",title:"文本",style:{box:{display:"block"},title:{},input:{}},children:""}},{label:"多行文本框",icon:"icon iconfont icon-duohangwenben1",type:"multilineText",category:"form",render(e){return s("div",{class:"cannotPreview",style:e.style.box,"data-id":this.type},[s("div",{style:e.style.title},[e.title?e.title:"多行文本"]),s(Q,{style:e.style.input,type:"textarea",placeholder:e.inputBoxPlaceholder?e.inputBoxPlaceholder:"",clearable:e.clearable?e.clearable:!1,autosize:e.autosize},null)])},defaultData:{type:"multilineText",title:"多行文本",style:{box:{display:"block"},title:{},input:{}},children:"",autosize:{minRows:2,maxRows:6}}}];class Ye{constructor(t=[],n=new Map){this.componentList=t,this.componentMap=n}register(t){this.componentList.push(t),this.componentMap.set(t.type,t)}}const se=new Ye;for(let e of _e)se.register({label:e.label,type:e.type,category:e.category,defaultData:e.defaultData,preview:()=>s(Qe,{block:e}),render:t=>e.render(t)});const Qe=ie({props:{block:{type:Object}},setup(e){return()=>s("span",{datatype:e.block.type},[s("i",{class:e.block.icon},null),s("label",null,[e.block.label])])}}),Je=e=>e instanceof Array?e.map(t=>{let n=Je(t.children),o={...t,children:n,style:t.style};return t.type.includes("container")&&(o.childrenList=t.children),se.componentMap.get(t.type).render(o)}):e;function it(){return z({method:"get",url:"/getEditData",headers:{"Content-Type":"application/x-www-form-urlencoded"}})}function at(e){return z({method:"post",url:"/delEditData",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:{id:e}})}function lt(e){return z({method:"post",url:"/addEditData",headers:{"Content-Type":"application/json;charset=utf-8"},data:e})}function st(e){return z({method:"post",url:"/updateEditData",headers:{"Content-Type":"application/json;charset=utf-8"},data:e})}export{ot as _,Z as a,st as b,tt as c,De as d,ee as e,se as f,it as g,at as h,lt as i,rt as m,Je as r,nt as s,te as u};
