import{m as e,u as t,_ as a}from"../userStore/userStore.879988be.js";import{m as s,P as i,t as l,v as o,w as d}from"../home/home.607a6b10.js";import{G as r,Z as n,h as c,ag as m,o as p,c as u,a as h,U as g,O as v,u as j,F as f,a7 as y,S as b,I as x,T as k}from"../@vue/@vue.5b184091.js";import{p as I,b as w,a as S}from"../index.3ae1860b.js";import{j as V,c as C}from"../element-plus/element-plus.739d7a40.js";import"../axios/axios.5ae1da96.js";import"../pinia/pinia.e5f2e591.js";import"../mitt/mitt.f0e54764.js";import"../deepcopy/deepcopy.bcf77b89.js";import"../type-detect/type-detect.74abd79c.js";import"../dayjs/dayjs.fdf8d021.js";import"../fundebug-javascript/fundebug-javascript.4b005614.js";import"../fundebug-vue/fundebug-vue.04a7ac72.js";import"../vue-router/vue-router.f65266be.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.9fc9a9b5.js";import"../@element-plus/@element-plus.cb377f36.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../async-validator/async-validator.8d480e59.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.5fea19da.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.01901ece.js";const D=""+new URL("../../png/noneData1.cb06.png",import.meta.url).href,_={page:{type:"page",title:"Hello world",style:{},children:["text-8adc9764"],subtitle:""},"text-8adc9764":{children:"这是新建好的页面！",type:"text",style:{position:"relative",fontSize:"16px",color:"black",zIndex:1},parent:"page"}},z=r({setup:()=>()=>s("page")}),O={class:"home"},J={class:"home-header"},N=h("div",{class:"home-header-left"},[h("h2",null,"codeFlow")],-1),U={class:"home-header-right"},F=h("div",{class:"home-header-right-avatar"},[h("img",{src:a,alt:"user"})],-1),M={class:"home-body"},P={class:"home-body-left"},$=h("div",{class:"home-body-left-header"},[h("span",null,"我的页面")],-1),E={class:"home-body-left-content"},G=["onClick"],H={class:"title"},L=["onClick"],R={key:0,class:"home-body-right-viewer"},T={key:1,class:"home-body-right-none"},Z=[h("img",{src:D,alt:"没有页面捏"},null,-1)],q=h("span",null,"确认删除该页面吗？",-1),A={class:"dialog-footer"},B=r({__name:"home",setup(a){const s=e(I);t(I).token=w("token");const r=n({editdata:[],dialogVisible:!1,delIndex:0,selectIndex:0}),D=e=>{r.editdata.forEach(((t,a)=>{t.active=!1,a==e&&(t.active=!0,S("data",JSON.stringify(t.jsonData)),s.title=t.title,r.selectIndex=t.id)})),s.setMap()},B=async()=>{let e=await o(r.editdata[r.delIndex].id);r.dialogVisible=!1,r.editdata.splice(r.delIndex,1);let t=r.editdata.length;if(0==t)return localStorage.removeItem("title"),void localStorage.removeItem("data");D(r.delIndex==t?r.delIndex-1:r.delIndex),C.success({message:e.data.msg,duration:2e3})};return c((()=>{(async()=>{let e=await l();r.editdata=e.data.editData.map(((e,t)=>(e.active=!1,0==t&&(e.active=!0,S("data",e.jsonData),s.title=e.title,r.selectIndex=e.id),e.jsonData=JSON.parse(e.jsonData),e))),r.editdata,s.setMap()})()})),(e,t)=>{const a=m("el-button"),l=m("el-dialog");return p(),u(f,null,[h("div",O,[h("header",J,[N,h("div",U,[h("div",{class:"home-header-right-btn",onClick:t[0]||(t[0]=t=>(e.$router.push("/editor"),S("title",s.title),void S("id",r.selectIndex)))}," 进入编辑 "),h("div",{class:"home-header-right-btn",onClick:t[1]||(t[1]=t=>(async e=>{let t=await d({title:"未命名页面",jsonData:JSON.stringify(_)});C.success({message:t.data.msg,duration:1e3}),e.push("/editor"),S("title","未命名页面"),S("data",JSON.stringify(_)),S("id",t.data.id)})(e.$router))}," 新建页面 "),g(j(V),{placement:"bottom",width:200,trigger:"click"},{reference:v((()=>[F])),default:v((()=>[g(j(i))])),_:1})])]),h("section",M,[h("div",P,[$,h("div",E,[h("ul",null,[(p(!0),u(f,null,y(r.editdata,((e,t)=>(p(),u("li",{class:x({active:e.active}),onClick:e=>D(t),key:e.id},[h("div",H,k(e.title),1),h("i",{class:"del icon iconfont icon-cha",onClick:e=>((e,t)=>{e.stopPropagation(),r.delIndex=t,r.dialogVisible=!0})(e,t)},null,8,L)],10,G)))),128))])])]),(p(),u("div",{class:"home-body-right",key:r.selectIndex},[r.editdata.length?(p(),u("div",R,[g(j(z))])):(p(),u("div",T,Z))]))])]),g(l,{title:"删除页面",modelValue:r.dialogVisible,"onUpdate:modelValue":t[3]||(t[3]=e=>r.dialogVisible=e),width:"30%"},{footer:v((()=>[h("span",A,[g(a,{onClick:t[2]||(t[2]=e=>r.dialogVisible=!1)},{default:v((()=>[b("取 消")])),_:1}),g(a,{type:"primary",onClick:B},{default:v((()=>[b("确 定")])),_:1})])])),default:v((()=>[q])),_:1},8,["modelValue"])],64)}}});export{B as default};
