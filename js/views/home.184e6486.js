import{m as e,u as t,_ as a}from"../userStore/userStore.49c50847.js";import{P as s,E as i,n as l,o,q as d}from"../home/home.c21240f2.js";import{p as r,b as n,l as c}from"../index.70967321.js";import{j as m,c as u}from"../element-plus/element-plus.cbbb2b2a.js";import{G as p,Z as h,h as g,ag as v,o as f,c as j,a as y,U as b,O as x,u as k,F as I,a7 as w,S,I as V,T as C}from"../@vue/@vue.5b184091.js";import"../axios/axios.5ae1da96.js";import"../pinia/pinia.e5f2e591.js";import"../mitt/mitt.f0e54764.js";import"../fundebug-javascript/fundebug-javascript.4b005614.js";import"../dayjs/dayjs.fdf8d021.js";import"../fundebug-vue/fundebug-vue.04a7ac72.js";import"../vue-router/vue-router.f65266be.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.9fc9a9b5.js";import"../@element-plus/@element-plus.cb377f36.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../async-validator/async-validator.8d480e59.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.5fea19da.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.01901ece.js";const D=""+new URL("../../png/noneData1.cb06.png",import.meta.url).href,_={page:{type:"page",title:"Hello world",style:{},children:["text-8adc9764"],subtitle:""},"text-8adc9764":{children:"这是新建好的页面！",type:"text",style:{position:"relative",fontSize:"16px",color:"black",zIndex:1},parent:"page",classList:[]}},z={class:"home"},O={class:"home-header"},J=y("div",{class:"home-header-left"},[y("h2",null,"codeFlow")],-1),N={class:"home-header-right"},U=y("div",{class:"home-header-right-avatar"},[y("img",{src:a,alt:"user"})],-1),E={class:"home-body"},F={class:"home-body-left"},L=y("div",{class:"home-body-left-header"},[y("span",null,"我的页面")],-1),M={class:"home-body-left-content"},P=["onClick"],$={class:"title"},q=["onClick"],A={key:0,class:"home-body-right-viewer"},G={key:1,class:"home-body-right-none"},H=[y("img",{src:D,alt:"没有页面捏"},null,-1)],R=y("span",null,"确认删除该页面吗？",-1),T={class:"dialog-footer"},Z=p({__name:"home",setup(a){const p=e(r);t(r).token=n("token");const D=h({editdata:[],dialogVisible:!1,delIndex:0,selectIndex:0}),Z=e=>{D.editdata.forEach(((t,a)=>{t.active=!1,a==e&&(t.active=!0,c("data",JSON.stringify(t.jsonData)),p.title=t.title,D.selectIndex=t.id)})),p.setMap()},B=async()=>{let e=await o(D.editdata[D.delIndex].id);D.dialogVisible=!1,D.editdata.splice(D.delIndex,1);let t=D.editdata.length;if(0==t)return localStorage.removeItem("title"),void localStorage.removeItem("data");Z(D.delIndex==t?D.delIndex-1:D.delIndex),u.success({message:e.data.msg,duration:2e3})},K=async e=>{let t=await d({title:"未命名页面",jsonData:JSON.stringify(_)});u.success({message:t.data.msg,duration:1e3}),e.push("/editor"),c("title","未命名页面"),c("data",JSON.stringify(_)),c("id",t.data.id)};return g((()=>{(async()=>{let e=await l();D.editdata=e.data.editData.map(((e,t)=>(e.active=!1,0==t&&(e.active=!0,c("data",e.jsonData),p.title=e.title,D.selectIndex=e.id),e.jsonData=JSON.parse(e.jsonData),e))),D.editdata,p.setMap()})()})),(e,t)=>{const a=v("el-button"),l=v("el-dialog");return f(),j(I,null,[y("div",z,[y("header",O,[J,y("div",N,[y("div",{class:"home-header-right-btn",onClick:t[0]||(t[0]=t=>{return a=e.$router,D.editdata.length||K(a),a.push("/editor"),c("title",p.title),void c("id",D.selectIndex);var a})}," 进入编辑 "),y("div",{class:"home-header-right-btn",onClick:t[1]||(t[1]=t=>K(e.$router))}," 新建页面 "),b(k(m),{placement:"bottom",width:200,trigger:"click"},{reference:x((()=>[U])),default:x((()=>[b(k(s))])),_:1})])]),y("section",E,[y("div",F,[L,y("div",M,[y("ul",null,[(f(!0),j(I,null,w(D.editdata,((e,t)=>(f(),j("li",{class:V({active:e.active}),onClick:e=>Z(t),key:e.id},[y("div",$,C(e.title),1),y("i",{class:"del icon iconfont icon-cha",onClick:e=>((e,t)=>{e.stopPropagation(),D.delIndex=t,D.dialogVisible=!0})(e,t)},null,8,q)],10,P)))),128))])])]),(f(),j("div",{class:"home-body-right",key:D.selectIndex},[D.editdata.length?(f(),j("div",A,[b(k(i))])):(f(),j("div",G,H))]))])]),b(l,{title:"删除页面",modelValue:D.dialogVisible,"onUpdate:modelValue":t[3]||(t[3]=e=>D.dialogVisible=e),width:"30%"},{footer:x((()=>[y("span",T,[b(a,{onClick:t[2]||(t[2]=e=>D.dialogVisible=!1)},{default:x((()=>[S("取 消")])),_:1}),b(a,{type:"primary",onClick:B},{default:x((()=>[S("确 定")])),_:1})])])),default:x((()=>[R])),_:1},8,["modelValue"])],64)}}});export{Z as default};
