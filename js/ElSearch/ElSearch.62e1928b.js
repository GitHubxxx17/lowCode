import{G as s,r as e,Z as a,Y as c,w as l,U as n,P as t,aj as i,S as r}from"../@vue/@vue.5b184091.js";import{a as o,l as h}from"../index.70967321.js";const u=s({props:{search:{type:Object}},setup(s){const u=e(null),p=a({searchList:o(s.search.searchKey)||[],inputIsFocus:!1}),d=()=>{p.inputIsFocus=!0},v=()=>{p.inputIsFocus=!1};window.addEventListener("click",v),c((()=>{window.removeEventListener("click",v)}));const f=()=>{if(""!=s.search.value.trim()){let e=p.searchList.findIndex((e=>e==s.search.value));e>=0&&p.searchList.splice(e,1),p.searchList.unshift(s.search.value),h(s.search.searchKey,p.searchList)}},L=()=>{p.searchList=[],localStorage.removeItem(s.search.searchKey)},m=e=>{v(),s.search.value=e,f()};return l((()=>s.search.value),(s=>{""==s?d():v()})),()=>n("div",{class:"el-search",onClick:s=>{s.stopPropagation()}},[n("div",{class:[p.inputIsFocus?"el-search-input-focus":"","el-search-input"]},[t(n("input",{ref:u,type:"text",placeholder:s.search.placeholder,onFocus:d,onChange:f,"onUpdate:modelValue":e=>s.search.value=e},null),[[i,s.search.value]]),n("span",null,[n("i",{class:["icon iconfont",s.search.value?"icon-cha":"icon-search"],onClick:e=>s.search.value=""},null)])]),p.inputIsFocus&&n("div",{class:"el-search-content",onClick:()=>{}},[0!=p.searchList.length&&n("div",{class:"el-search-content-history"},[n("div",{class:"el-search-content-history-header"},[n("span",null,[r("搜索历史")]),n("span",{onClick:L},[r("清空")])]),n("div",{class:"el-search-content-history-list"},[n("ul",null,[p.searchList.map(((e,a)=>n("li",{onClick:s=>m(e)},[n("span",null,[e]),n("i",{class:"icon iconfont icon-guanbi",onClick:e=>((e,a)=>{a.stopPropagation(),p.searchList.splice(e,1),h(s.search.searchKey,p.searchList)})(a,e)},null)])))])])]),n("div",{class:"el-search-content-default"},[n("div",{class:"el-search-content-default-header"},[n("span",null,[s.search.searchDefault.label])]),n("div",{class:"el-search-content-default-list"},[n("ul",null,[s.search.searchDefault.list.map((s=>n("li",{onClick:e=>m(s)},[n("span",null,[s])])))])])])])])}});export{u as E};
