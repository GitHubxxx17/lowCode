import{a as e}from"../axios/axios.5ae1da96.js";import{l as t,p as r,b as o}from"../index.96d73e75.js";import{d as s}from"../pinia/pinia.e5f2e591.js";import{m as a}from"../mitt/mitt.f0e54764.js";import{Z as n,w as i}from"../@vue/@vue.5b184091.js";import{c as u}from"../element-plus/element-plus.580e5caa.js";const l=""+new URL("../../jpg/user.89bc.jpg",import.meta.url).href;const p=a(),c=new Map;let m=null;const d=(e,t)=>{let r=e+"-"+w();return h(r,t),r},f=()=>{let e=JSON.parse(t("data"));for(let[t,r]of Object.entries(e))h(t,r)},h=(e,t)=>{let r=n(t),o=function(e,t){let r=null;return function(...o){clearTimeout(r),r=setTimeout((()=>{e.apply(this,o)}),t)}}((()=>{p.emit("changeEnd")}),700);i((()=>r),(()=>{m.disabled||o()}),{deep:!0}),c.set(e,r)},w=()=>"xyxxyxxx".replace(/[xy]/g,(function(e){let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),y=s("mainStore",{state:()=>({title:"新项目",isPreview:!1,EditorData:null,copyData:null,wantDel:null,wantCopy:null,queue:[],curPointerTo:-1,EditorDataMap:null,modify:{curData:null,modifying:0,disabled:!1},isLoading:!1,isSucessSave:!1,isNeedSave:!1,Breadcrumb:["页面"],rootNode:null,menuConfig:{key:0,isShowMenu:!1,elOutlineTree:null,style:{top:"0px",left:"0px"},selectKey:"",isShow:{selectComponent:!1,unselectComponent:!1,makeACopy:!1,copycomponents:!1,shearComponents:!1,pasteComponents:!1,delComponents:!1,moveForward:!1,moveBack:!1,undo:!1,redo:!1}}}),actions:{setMap(){var e;this.EditorDataMap=(e=this.modify,m=e,c.clear(),f(),c),this.curData=JSON.stringify(this.EditorDataMap.get("page"))},setEditorData(){return(e=>{let t=new Map;const r=o=>{t.set(o,e.get(o));let s=e.get(o).children;Array.isArray(s)&&s.map((e=>{r(e)}))};return r("page"),JSON.stringify(Object.fromEntries(t))})(this.EditorDataMap)}}}),g=y(r),x=()=>{g.isLoading=!1,g.isSucessSave=!1,g.isNeedSave=!0};let S=e.create({baseURL:"http://47.115.228.27:8081"});function j(e){return S({method:"post",url:"/user/checkIfUserExist",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:{username:e}})}function C(e,t){return S({method:"post",url:"/user/reguser",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:{username:e,password:t}})}function v(e,t){return S({method:"post",url:"/user/login",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:{username:e,password:t}})}S.interceptors.request.use((function(e){return e.url.match(/^\/user/)||(e.headers.authorization=o("token")),e}),(function(e){return Promise.reject(e)})),S.interceptors.response.use((function(e){return e}),(function(e){const{status:t}=e.request;return 0==t?(u.error("请检查您的网络配置!"),x()):400==t?(u.error("400错误,请求语法错误!"),x()):401==t?(u.error("401错误,请求需要身份验证!"),x()):403==t?(u.error("403错误,服务器拒绝请求!"),x()):404==t?(u.error("404错误,请求的资源不存在!"),x()):500==t?(u.error("500错误,服务器内部错误，无法完成请求!"),x()):502==t?(u.error("502错误,错误网关,请检查您的网络配置!"),x()):503==t?(u.error("503错误,服务器暂时无法处理请求!"),x()):504==t&&(u.error("504错误,网关超时,请检查您的网络配置!"),x()),Promise.reject(e)}));const D=s("userStore",{state:()=>({username:"",token:""})});export{l as _,d as a,j as c,p as e,v as l,y as m,C as r,S as s,D as u};
